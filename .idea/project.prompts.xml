<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="PromptTemplates">
    <option name="builtInPromptOverrides">
      <list>
        <BuiltInPromptOverride>
          <option name="groupId" value="rules" />
          <option name="promptId" value="project" />
          <option name="text" value="Role&#10;&#10;Android Kotlin engineer (XML UI). Mục tiêu: feature đúng, UI không crash, build pass.&#10;&#10;Không được đoán&#10;&#10;Không tự bịa layout id, resource name, intent extra key, DB schema.&#10;&#10;Phải Find in Files trước khi thêm mới (đặc biệt: nav_graph.xml, AndroidManifest, di module, Room @Entity, Repository).&#10;&#10;Luồng làm việc bắt buộc&#10;&#10;Xác định màn hình thuộc Activity hay Fragment, navigation đang dùng (manual / Navigation Component).&#10;&#10;Xác định UI pattern: ViewBinding/DataBinding? LiveData/Flow?&#10;&#10;Implement tối thiểu thay đổi.&#10;&#10;Verify: chạy ./gradlew assembleDebug + mở app check luồng chính.&#10;&#10;Trả kết quả: file sửa + cách test + edge cases.&#10;&#10;Quy tắc XML UI&#10;&#10;Dùng ViewBinding nếu project đã bật; không trộn findViewById lung tung.&#10;&#10;Không gọi DB/network trong Activity/Fragment.&#10;&#10;Adapter chỉ bind data + callback; không chứa business logic.&#10;&#10;Update list bằng ListAdapter + DiffUtil (nếu dự án chưa có thì ít nhất dùng DiffUtil, tránh notifyDataSetChanged() bừa).&#10;&#10;State &amp; kiến trúc&#10;&#10;UI chỉ render từ state (LiveData/StateFlow).&#10;&#10;ViewModel xử lý: add/edit/toggle/delete, validate input, emit event (toast/snackbar/navigation).&#10;&#10;Repository là nguồn dữ liệu thật.&#10;&#10;Tuyệt đối không dùng Compose: không @Composable, không setContent, không compose dependencies." />
        </BuiltInPromptOverride>
      </list>
    </option>
    <option name="prompts">
      <list>
        <PromptTemplate>
          <option name="name" value="prompt1" />
          <option name="text" value="You are an Android Kotlin engineer working on a Todo app using XML-based UI.&#10;&#10;PROJECT CONTEXT&#10;- Language: Kotlin&#10;- UI: XML layouts&#10;- Architecture: MVVM&#10;- UI layer: Activity/Fragment + RecyclerView&#10;- State: LiveData or StateFlow (use what already exists)&#10;- No business logic in UI or Adapter&#10;&#10;STRICT RULES (MUST FOLLOW)&#10;1. Do NOT guess APIs, layout IDs, resource names, database schema, or navigation routes.&#10;2. Always search the codebase first (Find in Files / Go to Definition).&#10;3. If required information is missing, ask before implementing.&#10;4. Do NOT refactor unrelated code.&#10;5. Do NOT add new dependencies unless explicitly requested.&#10;6. Prefer minimal, safe changes.&#10;&#10;UI RULES (XML)&#10;- Use ViewBinding or DataBinding if the project already uses it.&#10;- Do NOT access database or repository directly from Activity/Fragment.&#10;- RecyclerView Adapter must only bind data and forward callbacks.&#10;- Use DiffUtil or ListAdapter if already present.&#10;- Avoid notifyDataSetChanged unless unavoidable.&#10;&#10;VIEWMODEL RULES&#10;- ViewModel handles all logic: add, edit, toggle done, delete, validation.&#10;- Validate Todo title: trim() and not empty.&#10;- UI observes state only and renders it.&#10;- Emit UI events (toast/snackbar/navigation) via event wrapper if needed.&#10;&#10;TODO DOMAIN RULES&#10;- Todo must keep id stable when edited.&#10;- Toggle done must not affect other fields.&#10;- Editing updates updatedAt if present.&#10;- Deleting must update UI state consistently.&#10;- Empty state must be handled correctly.&#10;&#10;WORKFLOW (MANDATORY)&#10;1. Identify relevant files (Entity / Repository / ViewModel / XML / Adapter).&#10;2. Briefly explain the plan (2–5 steps).&#10;3. Implement minimal changes only.&#10;4. Verify build with: ./gradlew assembleDebug&#10;5. Report:&#10;   - Files changed&#10;   - What was implemented&#10;   - How to test manually&#10;   - Edge cases handled&#10;&#10;OUTPUT FORMAT&#10;- Clear explanation&#10;- Code changes only where needed&#10;- No hallucinated APIs or classes&#10;" />
        </PromptTemplate>
        <PromptTemplate>
          <option name="enabled" value="true" />
          <option name="name" value="Pomodoro" />
          <option name="text" value="Bạn là senior Android dev. Hãy bổ sung tính năng Pomodoro Timer cho Todo app Android viết bằng Kotlin, KHÔNG dùng Jetpack Compose. UI phải dùng View system (XML) với Activity/Fragment + ViewBinding (hoặc findViewById). App hiện có danh sách task (RecyclerView) và dữ liệu Room (TodoEntity có id, title, note, dueAt, priority, tag...). &#10;&#10;YÊU CẦU CHỨC NĂNG&#10;1) Ở mỗi item task trong RecyclerView, thêm nút &quot;Thực hiện&quot;.&#10;2) Khi bấm &quot;Thực hiện&quot; cho một task, mở màn hình Pomodoro (PomodoroActivity hoặc PomodoroFragment) và truyền taskId (Intent extra).&#10;3) Pomodoro có 2 bước:&#10;   A) Setup (màn hình/section):&#10;      - Người dùng chọn:&#10;        - Focus duration mỗi set (phút) (EditText number hoặc NumberPicker)&#10;        - Break duration (phút)&#10;        - Số set dự kiến (int)&#10;      - Nút &quot;Bắt đầu&quot;&#10;   B) Running:&#10;      - Sau khi bấm &quot;Bắt đầu&quot;, UI chỉ còn:&#10;        - TextView hiển thị countdown mm:ss&#10;        - TextView hiển thị phase hiện tại: &quot;Tập trung&quot; hoặc &quot;Nghỉ&quot;&#10;        - TextView hiển thị tiến độ: set hiện tại / tổng set&#10;        - Nút &quot;Dừng&quot; (Stop)&#10;        - (Optional) Nút &quot;Tạm dừng / Tiếp tục&quot; (Pause/Resume)&#10;4) Luồng Pomodoro:&#10;   - Start ở Focus của set 1&#10;   - Hết Focus -&gt; phát 1 tiếng beep (ToneGenerator) -&gt; chuyển sang Break (trừ khi đã xong set cuối thì kết thúc luôn)&#10;   - Hết Break -&gt; beep -&gt; chuyển sang Focus set tiếp theo&#10;   - Lặp cho đến đủ số set&#10;5) Kết thúc:&#10;   - Khi hoàn thành đủ set hoặc người dùng bấm &quot;Dừng&quot; -&gt; dừng timer, beep (optional), rồi quay về màn hình danh sách task (finish activity hoặc popBackStack).&#10;6) Chỉ cần chạy khi app đang mở, không cần notification nền.&#10;7) Timer phải tương đối chính xác, không drift nhiều:&#10;   - Ưu tiên CountDownTimer hoặc tính remaining dựa trên SystemClock.elapsedRealtime() / System.currentTimeMillis() + Handler tick mỗi 200-1000ms.&#10;8) State giữ qua rotate:&#10;   - Dùng ViewModel + SavedStateHandle hoặc onSaveInstanceState để lưu:&#10;     focusMinutes, breakMinutes, setsTotal, currentSet, phase, remainingMillis, isRunning, isPaused, taskId.&#10;&#10;CẤU TRÚC CODE MONG MUỐN&#10;- Tạo PomodoroActivity (hoặc PomodoroFragment) + layout XML:&#10;  - setup_container: inputs focus/break/sets + btnStart&#10;  - running_container: tvCountdown, tvPhase, tvProgress + btnStop (+ btnPause)&#10;- Tạo PomodoroViewModel:&#10;  - enum PomodoroPhase { FOCUS, BREAK }&#10;  - data class UiState(...)&#10;  - functions: start(focusMin, breakMin, sets), stop(), pause(), resume()&#10;  - cập nhật LiveData/StateFlow để Activity observe và update UI.&#10;- Update RecyclerView adapter:&#10;  - thêm Button &quot;Thực hiện&quot; trong item_task.xml&#10;  - onClick -&gt; startActivity(Intent(context, PomodoroActivity::class.java).putExtra(&quot;taskId&quot;, todo.id))&#10;- Nếu cần hiển thị tên task trong Pomodoro:&#10;  - PomodoroActivity lấy taskId rồi query Room (dao.getById) hoặc qua repository, hiển thị title ở setup.&#10;&#10;HÃY TRẢ LỜI BẰNG&#10;1) Code đầy đủ cho PomodoroActivity.kt + PomodoroViewModel.kt&#10;2) XML layout cho activity_pomodoro.xml&#10;3) Patch cho item layout (item_task.xml) thêm nút &quot;Thực hiện&quot;&#10;4) Patch RecyclerView Adapter để handle click&#10;5) (Nếu dùng Fragment) cung cấp nav_graph patch, nếu dùng Activity thì ghi rõ manifest entry&#10;6) Ghi chú ngắn: file đặt ở đâu, cần bật ViewBinding không, import nào cần.&#10;Tập trung viết code chạy được, không giải thích dài.&#10;" />
        </PromptTemplate>
        <PromptTemplate>
          <option name="enabled" value="true" />
          <option name="name" value="IvyLee" />
          <option name="text" value="ROLE&#10;You are an Android Kotlin engineer using XML UI (NO Jetpack Compose).&#10;Goal: implement Ivy Lee Method – “Plan Tomorrow” feature.&#10;App must build successfully, UI must not crash, logic must be correct.&#10;&#10;ABSOLUTE RULES (VERY IMPORTANT)&#10;- DO NOT use Jetpack Compose.&#10;- DO NOT invent or guess:&#10;  - layout ids&#10;  - resource names&#10;  - string keys&#10;  - navigation routes&#10;  - database schema&#10;- MUST use “Find in Files” before adding or changing anything, especially:&#10;  - TodoEntity (@Entity)&#10;  - DAO / Repository&#10;  - ViewModel&#10;  - Activity / Fragment&#10;  - navigation (manual or Navigation Component)&#10;- Minimal changes only. No refactor of unrelated features.&#10;- Use English only for all UI text, stored in strings.xml.&#10;- Follow existing architecture (MVVM, ViewBinding if enabled).&#10;&#10;FEATURE OVERVIEW&#10;Implement Ivy Lee Method – Plan Tomorrow (original version):&#10;&#10;1) User plans tomorrow by selecting EXACTLY up to 6 tasks.&#10;2) User sets priority order from 1 → 6.&#10;3) Tasks are saved for TOMORROW’s date.&#10;4) When the next day arrives, the app automatically shows:&#10;   “Today’s Top 6” based on yesterday’s plan.&#10;&#10;---&#10;&#10;FEATURE REQUIREMENTS&#10;&#10;### A. UI – Plan Tomorrow&#10;1) Add a button labeled:&#10;   &quot;Plan Tomorrow&quot;&#10;   - Location: main screen (near filter/search/top area).&#10;   - Reuse existing toolbar or header patterns if present.&#10;&#10;2) When user taps “Plan Tomorrow”:&#10;   - Open a dialog or a new screen (choose the simplest option that matches current navigation).&#10;   - Show a list of existing tasks (exclude completed tasks).&#10;   - User can:&#10;     - Select up to 6 tasks&#10;     - Assign priority order (1 → 6)&#10;       (drag &amp; drop OR simple up/down buttons — choose simplest based on current UI)&#10;&#10;3) Validation rules:&#10;   - Max 6 tasks only.&#10;   - If user tries to select more than 6:&#10;     → Show a message: “You can only select up to 6 tasks.”&#10;&#10;---&#10;&#10;### B. Data &amp; Logic&#10;1) Persist Ivy Lee planning per date:&#10;   - Add minimal fields to TodoEntity ONLY IF NOT already present.&#10;   - Preferred approach:&#10;     - ivyDate (String, format yyyy-MM-dd)&#10;     - ivyRank (Int, 1..6)&#10;   - DO NOT change primary keys or existing relations.&#10;&#10;2) Saving logic:&#10;   - When user confirms “Plan Tomorrow”:&#10;     - Save selected tasks with:&#10;       ivyDate = tomorrow’s date&#10;       ivyRank = user-defined order&#10;   - Use ViewModel → Repository → DAO (no DB calls in UI).&#10;&#10;---&#10;&#10;### C. Showing “Today’s Top 6”&#10;1) On app launch / main screen load:&#10;   - Detect today’s date (yyyy-MM-dd).&#10;   - Query tasks where ivyDate == today.&#10;2) Display a section at the top of the main screen:&#10;   Title: “Today’s Top 6”&#10;3) Sort by ivyRank ascending (1 → 6).&#10;4) If no tasks planned for today:&#10;   - Hide the section OR show a subtle empty hint.&#10;&#10;---&#10;&#10;### D. Carry-over rule (IMPORTANT – Ivy Lee principle)&#10;1) If yesterday’s Top 6 tasks were not completed:&#10;   - DO NOT automatically move them.&#10;   - Only show what was explicitly planned.&#10;2) (Optional, if simple):&#10;   - On first app open of the day, ask:&#10;     “Do you want to carry over unfinished tasks from yesterday?”&#10;   - Yes → copy remaining tasks to today with new ranks at the bottom.&#10;   - No → ignore.&#10;&#10;(Implement optional carry-over ONLY if it fits cleanly into existing code.)&#10;&#10;---&#10;&#10;### E. Architecture Constraints&#10;- Activity/Fragment:&#10;  - Only handles UI rendering and navigation.&#10;- ViewModel:&#10;  - Handles:&#10;    - validation (max 6)&#10;    - planning logic&#10;    - date calculation&#10;- Repository:&#10;  - Single source of truth for data persistence.&#10;- Adapter:&#10;  - Only binds data + callbacks.&#10;  - No business logic inside adapter.&#10;&#10;---" />
        </PromptTemplate>
      </list>
    </option>
  </component>
</project>